<script>
let passwords = {
    "montebano": "Montebano",
    "maru": "Maru",
    "doromal": "Doromal",
    "panaligan": "Panaligan",
    "clarido": "Clarido",
    "chua": "Chua",
    "magallanes": "Magallanes",
    "olvido": "Olvido",
    "delosreyes": "Delos Reyes",
    "aboyo": "Aboyo",
    "alon": "Alon"
};

let names = JSON.parse(localStorage.getItem("remainingNames")) || [
    "Montebano",
    "Maru",
    "Doromal",
    "Panaligan",
    "Clarido",
    "Chua",
    "Magallanes",
    "Olvido",
    "Delos Reyes",
    "Aboyo",
    "Alon"
];

if (localStorage.getItem("alreadyPicked")) {
    document.getElementById("result").innerText =
        "You already picked on this device.";
}

function pick() {
    let pass = document.getElementById("password").value.toLowerCase();

    if (localStorage.getItem("alreadyPicked")) {
        document.getElementById("result").innerText =
            "Only one pick allowed per device.";
        return;
    }

    if (!passwords[pass]) {
        document.getElementById("result").innerText =
            "Invalid password.";
        return;
    }

    if (names.length === 0) {
        document.getElementById("result").innerText =
            "All names are taken.";
        return;
    }

    let randomIndex = Math.floor(Math.random() * names.length);
    let picked = names[randomIndex];

    names.splice(randomIndex, 1);

    localStorage.setItem("remainingNames", JSON.stringify(names));
    localStorage.setItem("alreadyPicked", "true");

    document.getElementById("result").innerText =
        "ðŸŽ‰ Your Manito/Manita is: " + picked;
}
</script>
